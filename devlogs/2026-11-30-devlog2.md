---
layout: default
title: "11.30.2026. Девлог 2: Система игровых объектов"
parent: Девлоги
nav_order: 2
---

# Девлог #2: Система игровых объектов

Размер этого девлога сравнительно небольшой, т. к. прошла всего неделя. Всё это время я работал над системой **игровых объектов и компонентов**. 

## Entity-Component-System

ECS (Entity-Component-System) - архитектурный паттерн широко используемый в разработке игр, отлично подходящий для имплементации игровых объектов. ECS возводит в абсолют принцип Composition Over Inheritance, а также является примером Data Oriented Design. ECS состоит из трёх типов объектов:
 - **Компоненты** (Component) - какое-то свойство игрового объекта. Представляет собой исключительно контейнер с данными, никакой логики. Вот пример компонента из движка:
    ```cpp
    class Transform : public Component {
    public:
        glm::vec3 position{ 0.0f };
        glm::quat rotation{ 1.0f, 0.0f, 0.0f, 0.0f };
        glm::vec3 scale{ 1.0f };

        std::unique_ptr<Component> clone() override { ... }
    }
    ```
 - **Сущности** (Entity) - в движке это игровые объекты (GameObject). Объединяют компоненты в одну конкретную сущность.
 - **Системы** (System) - здесь содержится вся логика. К примеру `RenderingSystem` обрабатывает игровые объекты, обладающие компонентами `Transform`, `ModelComponent`, `Behavior`.

Однако API движка позволит разработчику не обязательно писать в стиле ECS: более традиционные подходы тоже можно будет использовать.

{: .note }
На самом деле движок чуть-чуть сдвинулся в сторону EC (Entity-Component): в силу архитектурных требований у каждого компонента появился обязательный метод .clone(), рассматриваю также введение методов для сериализации и десериализации 

## Юнит-тесты 

Реализация системы игровых объектов была относительно сложной для меня, из-за большого количества методов, взаимодействующих с типовой системой C++, чем я раньше не занимался. Более того, в некоторых классах этой системы буквально десятки методов, всё это проверить в ручную за приемлемое время я бы просто не смог. Поэтому я добавил в проект юнит-тест фреймворк `googletest`. Сейчас `GameObject` - единственная протестированная система в проекте, и видимо будет такой оставаться ещё долго. Создание тестов сейчас - неприоритетная задача.
